#公司卡

# 公司卡

## IBO

```SQL
select * from card_token where card_number = '5100123400000095';
select ACCOUNT_ID from card where card_token_id ='695711AA7E334AB38350C96769B727EA';
SELECT CORPORATE_CUSTOMER_ID FROM account WHERE id = '8CC01F136CC04BFBBD28EE76D659EB73' ;
SELECT CUSTOMER_ID , NAME FROM CUSTOMER_CORPORATE_META ccm WHERE CUSTOMER_ID ='E09776239FCF4DC09EEE936611EED60
```

```sql
SELECT
	ct.CARD_NUMBER ,
	ccm.NAME
FROM
	ACCOUNT a
LEFT JOIN CUSTOMER_CORPORATE_META ccm ON ccm.CUSTOMER_ID = a.CORPORATE_CUSTOMER_ID
LEFT JOIN CARD c ON a.ID = c.ACCOUNT_ID
LEFT JOIN CARD_TOKEN ct ON ct.ID = c.CARD_TOKEN_ID
WHERE
	ct.card_number IN ('5100123400000095','4800982200000068','4800982200000019','4800982200000027','4800982200000035','4800982200000076','4800982200000084');
```

![[Pasted image 20231003120415.png|500]]

## IAS

客户类型, map to column CSR_TYP_CDE [CONT/CUST(Corp)]  
法人团体标识, map to column CPE_IND [1/0]

```
SELECT CSR_TYP_CDE, COUNT(*) FROM CUSTOMER c group by CSR_TYP_CDE;
```

```sql
SELECT
	a.ITN_IDN_CDE,
	c. CSR_TYP_CDE,
	a2.PAN_TXT,
	c.CPE_IND
FROM
	ACCOUNT a
LEFT JOIN CUSTOMER c ON
	a.CSR_IDN_SKY = c.CSR_IDN_SKY
LEFT JOIN APPLICATION a2 ON
	a.ACT_IDN_SKY = a2.ACT_IDN_SKY
WHERE
	c.CSR_TYP_CDE = 'CUST' AND c.CPE_IND = '1';
```

# 附卡

## IBO

CARD_RELATION P 主卡 S 附卡

```sql
SELECT c.CARD_RELATION FROM card c
```

![[Pasted image 20231003153121.png]]

## IAS

MAN_SUP_IND 1 主卡 0 附卡

```sql
select a.man_sup_ind, a2.PAN_TXT
from account a LEFT JOIN APPLICATION a2 ON a.ACT_IDN_SKY = a2.ACT_IDN_SKY
WHERE  a.man_sup_ind IS NOT NULL AND a.man_sup_ind = '0'
```

# Account Levle

结构级别, map to column ACT_LVL_NBR
